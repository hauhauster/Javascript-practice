<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Lab4</title>
	<meta charset="utf-8" />
    <link rel="stylesheet" href="../styles/Lab4.css">
    <link rel="stylesheet" href="../styles/索引.css">
    <link rel="stylesheet" href="../styles/Lab1.css">
    <style>   
    </style>
    <script>
        i = 0;
        window.onload = function () {
            var imgs = document.querySelectorAll("img.playimg");
            var imgslen = imgs.length;
            setclock();
        	intervalId = setInterval(setclock, 3000);
        	for(var i =0;i<imgslen;i++)
            {
                imgs[i].onclick = function () { mouseClick(this.id); }
            }
        	document.getElementById("pic").onclick = function(){href(this.id);}
        }
        jsImg = new Array("../images/image1.jpg","../images/image2.jpg","../images/image3.jpg");
        var len = jsImg.length;
        function setclock() {
            	for(var j=1;j<=len;j++)
            	{
            		document.getElementById("no"+j).src = "../images/dot.png";
            	}
            document.getElementById("pic").src = jsImg[i];
            document.getElementById("no"+(i+1)).src = "../images/dot2.png"; 
            i++;
            if(i>=len)i=0;
        }
        count=0;
        function mouseClick (imgid) {
          if(imgid=="no5"&&count==0){ //暫停
          	clearInterval(intervalId);
          	document.getElementById("no5").src ="../images/play.png";
          	count=1;
          	return;
          }
          if(imgid=="no5"&&count==1){ //繼續
          	document.getElementById("no5").src ="../images/stop.png";
          	intervalId = setInterval(setclock, 3000);
          	count = 0;
          	return;
          }
        	if(imgid=="no6"){ //下一個
          	clearInterval(intervalId);
          	setclock();
          	if(count==0) //如果按下一個之前沒有按過暫停則繼續輪播	
          		intervalId = setInterval(setclock, 3000);
          	return;
          }
        	if(imgid=="no4"){ //上一個
          	clearInterval(intervalId);
          	if(i==2)i=0;
          	else ++i;
          	setclock();
          	if(count==0) //如果按上一個之前沒有按過暫停則繼續輪播	
          		intervalId = setInterval(setclock, 3000);
          	return;
          }
        }
        //點圖片跳到其他連結
        function href(picid){
        	var srcpic = document.getElementById(picid).src;
        	//看srcpic有沒有對應的檔名,來決定去哪個link
       		if(srcpic.lastIndexOf("image1.jpg")!=-1)
       			{location.href = "https://unsplash.com/collections/158533/eat-drink?photo=uhJfaJ6c9fY";}
       		if(srcpic.lastIndexOf("image2.jpg")!=-1)
       			{location.href = "https://unsplash.com/photos/UkaxVVAgDaw";}
       		if(srcpic.lastIndexOf("image3.jpg")!=-1)
       			{location.href = "https://unsplash.com/collections/158533/eat-drink?photo=4AS6y6UH70s";}
        }
        
    </script>
</head>
<body>
    <div id="background5">
        <div id="allpage">
            <ul id="menu">
                <li><a href="../index.html">HOME</a></li>
                <li><a href="Lab1.html">99乘法</a></li>
                <li><a href="Lab2.html">表單</a></li>
                <li><a href="Lab3.html">評點</a></li>
                <li><a href="Lab4.html">廣告輪播</a></li>
                <li><a href="Lab5.html">日曆</a></li>
            </ul>
                <div id="content">
                    <div class="picdiv">
                        <img id="pic" class="bigimg" />
                    </div>
                    <div class="nodiv">
                        <img id="no1" class="numimg" src="../Images/dot.png" />
                        <img id="no2" class="numimg" src="../Images/dot.png" />
                        <img id="no3" class="numimg" src="../Images/dot.png" />
                    </div>
                    <div class="nodiv">
                        <img id="no4" class="playimg" src="../Images/last.png" />
                        <img id="no5" class="playimg" src="../Images/stop.png" />
                        <img id="no6" class="playimg" src="../Images/next.png" />
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
