<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>評分</title>
    <link rel="stylesheet" href="../styles/Lab3.css">
    <link rel="stylesheet" href="../styles/索引.css">
    <link rel="stylesheet" href="../styles/Lab1.css">
    <style>
       
    </style>
    <script>
        count = false; //用來固定點擊後星星的顏色
		goal = 0;
        window.onload = function () {
            var imgs = document.querySelectorAll("img.s");
            var imgslen = imgs.length;
            //document.getElementById("idstar").onmouseover = mouseOver;
            //document.getElementById("idstar").onmouseout = mouseOut;
            for(var i =0;i<imgslen;i++)
            {
                imgs[i].onmouseover = function (){ mouseOver(this.id); };
                imgs[i].onmouseout = function (){ mouseOut(this.id); };
                imgs[i].onclick = function () { mouseClick(this.id); };
            }
        }

        //滑鼠在星星上
        function mouseOver(imgid) {
            var len = imgid.length;
            var lastchar = imgid.charAt(len - 1); //id名稱的最後一個字元,得知第幾個星,再轉成整數
            var lastnum = parseInt(lastchar);
            document.getElementById("div1").innerHTML = lastnum + "星級";            
           if (count == false) {
                for (var i = lastnum; i > 0; i--) 
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "n";
                //count = true;
            }
            if (count == true) {
                for (var i = lastnum; i > 0; i--) 
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "n";
                //count = true;
            	if(lastnum<goal)
            		for (var i = goal; i > lastnum; i--) 
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "s";
            }
        }
         

        //滑鼠移開星星
        function mouseOut(imgid) {
           
            var len = imgid.length;
            var lastchar = imgid.charAt(len - 1);//id名稱的最後一個字元,得知第幾個星,再轉成整數
            var lastnum = parseInt(lastchar);
            if(count==false){
                for (var i = lastnum; i > 0; i--) {
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "s"; 
                }
            }
        	if (count == true) {
                for (var i = goal; i > 0; i--) 
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "n";
                if(lastnum>goal)
                {
        			for (var i = lastnum; i > goal; i--) 
                    document.getElementById("id" + imgid.substring(2, 6) + i).className = "s";
        		}
                //count = true;
            }
        		if(goal==0) document.getElementById("div1").innerHTML = "評分中...";
        		else document.getElementById("div1").innerHTML = goal + "星級";
        }

      
       function mouseClick(imgid) {
            var len = imgid.length;
            var lastchar = imgid.charAt(len - 1);
            var lastnum = parseInt(lastchar);
            if(count==false){
            	goal = lastnum;
            	count = true;
            }	
        	if(count==true){
        	//document.getElementById("div1").innerHTML = "打分數中...";
        	goal = lastnum;
        	}
        }
       
        </script>
</head>
<body>
    <div id="background4">
    	<div id="allpage">
        <ul id="menu">
            <li><a href="../index.html">HOME</a></li>
            <li><a href="Lab1.html">99乘法</a></li>
            <li><a href="Lab2.html">表單</a></li>
            <li><a href="Lab3.html">評點</a></li>
            <li><a href="Lab4.html">廣告輪播</a></li>
            <li><a href="Lab5.html">日曆</a></li>
        </ul>
    <div id="content">
    <div id = "star">
        <img id="idstar1" class="s" src="../Images/star.png" />
        <img id="idstar2" class="s" src="../Images/star.png" />
        <img id="idstar3" class="s" src="../Images/star.png" />
        <img id="idstar4" class="s" src="../Images/star.png" />
        <img id="idstar5" class="s" src="../Images/star.png" />
    </div>
    <div id="div1">評分中...</div>
    </div>
    </div>
    </div>
</body>
</html>


